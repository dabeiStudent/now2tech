{"version":3,"file":"static/js/563.b2b4f7db.chunk.js","mappings":"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","sources":["Pages/Search/SearchResultPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faMagnifyingGlassPlus } from '@fortawesome/free-solid-svg-icons'\r\nimport {\r\n    faChevronLeft,\r\n    faChevronRight\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport './SearchResultPage.css';\r\nimport './FilterByCategory.css'\r\nimport ProductCard from '../../components/UIElement/ProductCard';\r\nimport Loader from '../../components/UIElement/Loader';\r\nimport VoucherCard from '../HomePage/components/VoucherCard';\r\n\r\nconst SearchResultPage = () => {\r\n    let { keyword, page } = useParams();\r\n    const navigate = useNavigate();\r\n    const [isOverflow, setIsOverflow] = useState(false);\r\n    const [vouchers, setVoucher] = useState([]);\r\n    const [currentDate, setCurrentDate] = useState(new Date());\r\n    const [products, setProducts] = useState([]);\r\n    const [maxItem, setMaxItem] = useState(0);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const [selectedPage, setSelectedPage] = useState(1);\r\n    const [flag, setFlag] = useState(false);\r\n\r\n    const scrollRef = useRef(0);\r\n    const scrollListVoucherRef = useRef(0);\r\n    useEffect(() => {\r\n        const searchProduct = async () => {\r\n            await axios.get(`${process.env.REACT_APP_BACKEND_URL}/product/get-all-product?keyword=${keyword}&page=${page}`)\r\n                .then(res => {\r\n                    setProducts(res.data.result);\r\n                    setMaxItem(res.data.maxLength);\r\n                    const calculatedTotalPages = Math.ceil(res.data.maxLength / 12);\r\n                    setTotalPages(calculatedTotalPages);\r\n                })\r\n                .catch(err => console.log(err));\r\n        }\r\n        searchProduct();\r\n    }, [keyword, flag]);\r\n\r\n    const handleSelectPage = (page) => {\r\n        navigate(`/tim-kiem/${keyword}/${page}`);\r\n        setFlag(!flag);\r\n    }\r\n    useEffect(() => {\r\n        const getVouchers = async () => {\r\n            await axios.get(`${process.env.REACT_APP_BACKEND_URL}/voucher/get-all-voucher`)\r\n                .then(res => {\r\n                    setVoucher(res.data);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                })\r\n        };\r\n        getVouchers();\r\n        setCurrentDate(new Date());\r\n    }, []);\r\n    const filteredVoucher = vouchers.filter((voucher) => {\r\n        return new Date(voucher.end) > currentDate;\r\n    });\r\n    const scrollNext = () => {\r\n        const scrollContainer = scrollRef.current;\r\n\r\n        if (scrollContainer) {\r\n            scrollContainer.scrollLeft += 1200;\r\n        }\r\n    }\r\n\r\n    const scrollPrev = () => {\r\n        const scrollContainer = scrollRef.current;\r\n        if (scrollContainer) {\r\n            scrollContainer.scrollLeft -= 1200;\r\n        }\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <div className='search-page'>\r\n                <div className='search-page-container'>\r\n                    <div className=\"right-container\">\r\n                        <h1>Tìm với từ khóa: {keyword}</h1>\r\n                        {products ? (\r\n                            products.length > 0 ? (\r\n                                <React.Fragment>\r\n                                    <h2>Tìm thấy: {maxItem} sản phẩm</h2>\r\n                                    <div className=\"search-results\">\r\n                                        {products.map(product => (\r\n                                            <div className='custom-product-card' key={product._id}>\r\n                                                <ProductCard\r\n                                                    key={product._id}\r\n                                                    id={product._id}\r\n                                                    name={product.name}\r\n                                                    price={product.sellPrice}\r\n                                                    avgRating={product.avgRating}\r\n                                                    numOfReview={product.numOfReview}\r\n                                                    image={product.pimage[0]}\r\n                                                    voucher={product.voucher} />\r\n                                            </div>))}\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            ) : (\r\n                                <div className='product-not-found'>\r\n                                    <div className='icon-container'>\r\n                                        <FontAwesomeIcon className='magnify-glass-icon' icon={faMagnifyingGlassPlus} />\r\n                                    </div>\r\n                                    <p>Không có sản phẩm phù hợp</p>\r\n                                </div>\r\n                            )\r\n                        ) : (\r\n                            <Loader />\r\n                        )}\r\n                        <div className=\"pages\">\r\n                            <ul className=\"pages-bar\">\r\n                                {/* Render danh sách các trang */}\r\n                                {Array.from({ length: totalPages }, (_, index) => (\r\n                                    <li className={selectedPage === index + 1 ? \"selected\" : ''} key={index + 1} onClick={() => {\r\n                                        handleSelectPage(index + 1);\r\n                                        setSelectedPage(index + 1);\r\n                                    }}>\r\n                                        {index + 1}\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        </div>\r\n                        <div className=\"voucher-container\">\r\n                            <div className=\"voucher-container__main\">\r\n                                <h2>CHƯƠNG TRÌNH KHUYẾN MÃI</h2>\r\n                                <div className=\"scroll\" ref={scrollRef}>\r\n                                    <div ref={scrollListVoucherRef} className=\"voucher-container__list\">\r\n                                        {filteredVoucher.map(voucher => (\r\n                                            <VoucherCard\r\n                                                name={voucher.name}\r\n                                                key={voucher._id}\r\n                                                id={voucher._id}\r\n                                                image={voucher.image} />\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                                <button className=\"prev-btn\" style={isOverflow ? { display: 'flex' } : { display: 'none' }} onClick={scrollPrev}>\r\n                                    <FontAwesomeIcon icon={faChevronLeft} />\r\n                                </button>\r\n                                <button className=\"next-btn\" style={isOverflow ? { display: 'flex' } : { display: 'none' }} onClick={scrollNext}>\r\n                                    <FontAwesomeIcon icon={faChevronRight} />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default SearchResultPage"],"names":["_useParams","useParams","keyword","page","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","isOverflow","_useState3","_useState4","vouchers","setVoucher","_useState5","Date","_useState6","currentDate","setCurrentDate","_useState7","_useState8","products","setProducts","_useState9","_useState10","maxItem","setMaxItem","_useState11","_useState12","totalPages","setTotalPages","_useState13","_useState14","selectedPage","setSelectedPage","_useState15","_useState16","flag","setFlag","scrollRef","useRef","scrollListVoucherRef","useEffect","searchProduct","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","axios","get","concat","process","then","res","data","result","maxLength","calculatedTotalPages","Math","ceil","catch","err","console","log","stop","apply","arguments","getVouchers","_ref2","_callee2","_context2","filteredVoucher","filter","voucher","end","_jsx","React","children","className","_jsxs","length","map","product","ProductCard","id","_id","name","price","sellPrice","avgRating","numOfReview","image","pimage","FontAwesomeIcon","icon","faMagnifyingGlassPlus","Loader","Array","from","_","index","onClick","handleSelectPage","ref","VoucherCard","style","display","scrollContainer","current","scrollLeft","faChevronLeft","faChevronRight"],"sourceRoot":""}