"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[612],{7612:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var a=n(4165),s=n(5861),i=n(9439),r=n(2791),l=n(1243),c=n(4942),d=n(1413),o=n(9085),u=(n(5462),n(184)),h=function(){var e=(0,r.useState)(0),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),h=(0,i.Z)(s,2),m=h[0],p=h[1],f=(0,r.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",userName:"",gender:"",getNotice:"",image:"",dob:""}),x=(0,i.Z)(f,2),j=x[0],g=x[1],N=(0,r.useState)({oldPassword:"",newPassword:""}),v=(0,i.Z)(N,2),b=v[0],w=v[1],C=(0,r.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",userName:"",gender:"",getNotice:"",image:"",dob:""}),y=(0,i.Z)(C,2),k=y[0],_=y[1];(0,r.useEffect)((function(){l.Z.get("".concat("https://now2tech-f987dbd48ed8.herokuapp.com","/user/profile/my-profile"),{withCredentials:!0}).then((function(e){g({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,phoneNumber:e.data.phoneNumber,userName:e.data.userName,gender:e.data.gender,getNotice:e.data.getNotice,image:e.data.image,dob:e.data.dob}),_({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,phoneNumber:e.data.phoneNumber,userName:e.data.userName,gender:e.data.gender,getNotice:e.data.getNotice,image:e.data.image,dob:e.data.dob})})).catch((function(e){return console.log(e)}))}),[]);var Z=function(e){e.preventDefault(),p(""),T(),a(0)},P=/^(09|08|03|07|05)[0-9]{8}$/gim,S=function(e){e.preventDefault(),_((0,d.Z)((0,d.Z)({},k),{},(0,c.Z)({},e.target.name,e.target.value)))},D=function(e){e.preventDefault(),w((0,d.Z)((0,d.Z)({},b),{},(0,c.Z)({},e.target.name,e.target.value)))},q=(0,r.useState)(),E=(0,i.Z)(q,2),I=E[0],T=E[1];return(0,u.jsxs)(r.Fragment,{children:[(0,u.jsx)(o.Ix,{}),(0,u.jsxs)("div",{className:"main_profile",children:[(0,u.jsx)("h1",{children:"Th\xf4ng tin t\xe0i kho\u1ea3n"}),0===n?(0,u.jsxs)("div",{className:"my_profile",children:[(0,u.jsx)("div",{className:"left_profile",children:"Ch\u01b0a c\xf3"!==j.image?(0,u.jsx)("img",{src:j.image,alt:"H\xecnh \u0111\u1ea1i di\u1ec7n"}):(0,u.jsx)("img",{src:"https://i.imgflip.com/6yvpkj.jpg",alt:"H\xecnh \u0111\u1ea1i di\u1ec7n"})}),(0,u.jsxs)("div",{className:"mid_profile",children:[(0,u.jsxs)("p",{children:["T\xean: ",j.firstName]}),(0,u.jsxs)("p",{children:["H\u1ecd: ",j.lastName]}),(0,u.jsxs)("p",{children:["S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: ",j.phoneNumber]}),(0,u.jsxs)("p",{children:["Ng\xe0y sinh: ",j.dob]})]}),(0,u.jsxs)("div",{className:"right_profile",children:[(0,u.jsxs)("p",{children:["Email: ",j.email]}),(0,u.jsxs)("p",{children:["Username: ",j.userName]}),(0,u.jsxs)("p",{children:["Gi\u1edbi t\xednh: ","male"===j.gender?"Nam":"N\u1eef"]}),(0,u.jsxs)("p",{children:["Nh\u1eadn th\xf4ng b\xe1o: ",!1===j.getNotice?"Kh\xf4ng":"C\xf3"]})]})]}):1===n?(0,u.jsx)("div",{className:"update_image",children:(0,u.jsxs)("form",{className:"upload_image",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("file",I),l.Z.put("".concat("https://now2tech-f987dbd48ed8.herokuapp.com","/user/profile/update-image"),t,{withCredentials:!0}).then((function(e){window.location.href="/my-profile"})).catch((function(e){p("C\xf3 l\u1ed7i x\u1ea3y ra")}))},children:[(0,u.jsx)("div",{className:"image",children:(0,u.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){e.preventDefault(),T(e.target.files[0])}})}),(0,u.jsxs)("div",{className:"buttons-1",children:[I?(0,u.jsx)("input",{type:"submit",className:"custom-button-1",value:"C\u1eadp nh\u1eadt"}):(0,u.jsx)("button",{onClick:function(e){e.preventDefault();l.Z.put("".concat("https://now2tech-f987dbd48ed8.herokuapp.com","/user/profile/update"),{image:"Ch\u01b0a c\xf3"},{withCredentials:!0}).then((function(e){window.location.href="/my-profile"})).catch((function(e){"Request failed with status code 400"===e.message&&(0,o.Am)("C\xf3 l\u1ed7i x\u1ea3y ra")}))},className:"custom-button-1",children:"X\xf3a \u1ea3nh \u0111\u1ea1i di\u1ec7n"}),(0,u.jsx)("button",{className:"custom-button-1",onClick:Z,children:"Quay l\u1ea1i"})]})]})}):2===n?(0,u.jsxs)("div",{className:"update_profile",children:[(0,u.jsx)("p",{children:m}),(0,u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),0==P.test(k.phoneNumber)?(0,o.Am)("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"):l.Z.put("".concat("https://now2tech-f987dbd48ed8.herokuapp.com","/user/profile/update"),k,{withCredentials:!0}).then((function(e){window.location.href="/my-profile"})).catch((function(e){"Request failed with status code 400"===e.message&&(0,o.Am)("Kh\xf4ng th\u1ec3 \u0111\u1eb7t username n\xe0y")}))},children:[(0,u.jsxs)("div",{className:"my_profile",children:[(0,u.jsx)("div",{className:"left_profile"}),(0,u.jsxs)("div",{className:"mid_profile",children:[(0,u.jsx)("input",{name:"firstName",value:k.firstName,onChange:S,placeholder:"T\xean",required:!0}),(0,u.jsx)("input",{name:"lastName",value:k.lastName,onChange:S,placeholder:"H\u1ecd",required:!0}),(0,u.jsx)("input",{name:"phoneNumber",value:k.phoneNumber,onChange:S,placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",required:!0}),(0,u.jsx)("input",{name:"dob",value:k.dob,type:"date",onChange:S,placeholder:"Ng\xe0y sinh",required:!0})]}),(0,u.jsxs)("div",{className:"right_profile",children:[(0,u.jsx)("input",{name:"email",value:k.email,onChange:S,placeholder:"Email",disabled:!0}),(0,u.jsx)("input",{name:"userName",value:k.userName,onChange:S,placeholder:"Username",required:!0}),(0,u.jsxs)("select",{name:"gender",value:k.gender,onChange:S,required:!0,children:[(0,u.jsx)("option",{disabled:!0,children:"Gi\u1edbi t\xednh c\u1ee7a b\u1ea1n l\xe0:"}),(0,u.jsx)("option",{name:"gender",value:"male",children:"Nam"}),(0,u.jsx)("option",{name:"gender",value:"female",children:"N\u1eef"})]}),(0,u.jsxs)("select",{name:"getNotice",value:k.getNotice,onChange:S,required:!0,children:[(0,u.jsx)("option",{disabled:!0,children:"Nh\u1eadn th\xf4ng b\xe1o?"}),(0,u.jsx)("option",{value:"true",children:"C\xf3"}),(0,u.jsx)("option",{value:"false",children:"Kh\xf4ng"})]})]})]}),(0,u.jsxs)("div",{className:"buttons-1",children:[(0,u.jsx)("input",{type:"submit",className:"custom-button-1",value:"C\u1eadp nh\u1eadt"}),(0,u.jsx)("button",{className:"custom-button-1",onClick:Z,children:"Quay l\u1ea1i"})]})]})]}):(0,u.jsxs)("div",{className:"update_password",children:[(0,u.jsx)("p",{children:m}),(0,u.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),document.getElementById("repeatPassword").value!==document.getElementById("newPassword").value)return(0,o.Am)("M\u1eadt kh\u1ea9u m\u1edbi kh\xf4ng kh\u1edbp"),w({oldPassword:"",newPassword:""}),void(document.getElementById("repeatPassword").value="");l.Z.put("".concat("https://now2tech-f987dbd48ed8.herokuapp.com","/user/user-changepassword"),b,{withCredentials:!0}).then((function(e){(0,o.Am)(e.data.msg),p(""),w({oldPassword:"",newPassword:""}),document.getElementById("repeatPassword").value=""})).catch((function(e){"Request failed with status code 400"===e.message&&((0,o.Am)("M\u1eadt kh\u1ea9u c\u0169 kh\xf4ng \u0111\xfang"),w({oldPassword:"",newPassword:""}),document.getElementById("repeatPassword").value="")}))},children:[(0,u.jsxs)("div",{className:"profile_password",children:[(0,u.jsx)("input",{id:"oldPassword",name:"oldPassword",value:b.oldPassword,onChange:D,type:"password",placeholder:"M\u1eadt kh\u1ea9u c\u0169",required:!0}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{id:"newPassword",name:"newPassword",value:b.newPassword,onChange:D,type:"password",placeholder:"M\u1eadt kh\u1ea9u m\u1edbi",required:!0}),(0,u.jsx)("br",{}),(0,u.jsx)("input",{id:"repeatPassword",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi",type:"password",required:!0})]}),(0,u.jsxs)("div",{className:"buttons-1",children:[(0,u.jsx)("input",{type:"submit",className:"custom-button-1",value:"C\u1eadp nh\u1eadt"}),(0,u.jsx)("button",{className:"custom-button-1",onClick:Z,children:"Quay l\u1ea1i"})]})]})]}),0===n?(0,u.jsx)("div",{className:"container",children:(0,u.jsxs)("div",{className:"buttons",children:[(0,u.jsx)("button",{className:"custom-button",onClick:function(e){e.preventDefault(),p(""),a(1)},children:"C\u1eadp nh\u1eadt \u1ea3nh \u0111\u1ea1i di\u1ec7n"}),(0,u.jsx)("button",{className:"custom-button",onClick:function(e){e.preventDefault(),p(""),a(2)},children:"C\u1eadp nh\u1eadt th\xf4ng tin"}),(0,u.jsx)("button",{className:"custom-button",onClick:function(e){e.preventDefault(),p(""),a(3)},children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"})]})}):(0,u.jsx)("div",{})]})]})},m=n(1087),p={Not_proccessed:"Ch\u1edd x\xe1c nh\u1eadn",Processing:"\u0110ang chu\u1ea9n b\u1ecb h\xe0ng",Shipped:"\u0110ang giao",Delivered:"Giao th\xe0nh c\xf4ng",Cancelled:"\u0110\xe3 h\u1ee7y"},f=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)([]),c=(0,i.Z)(s,2),d=c[0],o=c[1];(0,r.useEffect)((function(){l.Z.get("".concat("https://now2tech-f987dbd48ed8.herokuapp.com","/order/my-order"),{withCredentials:!0}).then((function(e){return a(e.data)})).catch((function(e){return console.log(e)}))}),[]);var h=n.filter((function(e){return 0!==d.length?e.status.includes(d):e}));return(0,u.jsxs)(r.Fragment,{children:[(0,u.jsx)("h1",{children:"\u0110\u01a1n h\xe0ng c\u1ee7a b\u1ea1n"}),(0,u.jsx)("div",{className:"status-checkboxes",children:Object.keys(p).map((function(e){return(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"checkbox",value:e,checked:d.includes(e),onChange:function(){var t;o((t=e)===d?"":t)}}),p[e]]},e)}))}),(0,u.jsx)("div",{className:"my-order",children:(0,u.jsxs)("table",{children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"M\xe3 \u0111\u01a1n"}),(0,u.jsx)("th",{children:"Tr\u1ea1ng th\xe1i"}),(0,u.jsx)("th",{children:"S\u1ea3n ph\u1ea9m"}),(0,u.jsx)("th",{children:"T\u1ed5ng ti\u1ec1n"}),(0,u.jsx)("th",{children:"Chi ti\u1ebft"})]})}),(0,u.jsx)("tbody",{children:h.reverse().map((function(e){var t=e.items.reduce((function(e,t){return e+t.qty*t.price}),0);return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"oid_row",children:e._id}),(0,u.jsxs)("td",{children:["Not_proccessed"===e.status&&"Ch\u1edd x\xe1c nh\u1eadn","Processing"===e.status&&"\u0110ang x\u1eed l\xfd","Shipped"===e.status&&"\u0110ang giao","Delivered"===e.status&&"Giao th\xe0nh c\xf4ng","Cancelled"===e.status&&"\u0110\xe3 h\u1ee7y"]}),(0,u.jsx)("td",{children:(0,u.jsx)("ul",{children:e.items.map((function(e,t){return(0,u.jsxs)("li",{children:[(0,u.jsx)("img",{src:e.image})," - ",e.name," ","(",e.qty,")"]},t)}))})}),(0,u.jsxs)("td",{className:"oid_row",children:[t," VND - ",e.paymentMethod]})," ",(0,u.jsx)("td",{children:(0,u.jsx)(m.OL,{to:"/chi-tiet-don-hang/".concat(e._id),children:(0,u.jsx)("button",{children:"Xem"})})})]},e._id)}))})]})})]})},x=n(5344),j=function(){var e=(0,r.useContext)(x.V),t=(0,r.useState)(0),n=(0,i.Z)(t,2),c=n[0],d=n[1],o=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,l.Z.post("".concat("https://now2tech-f987dbd48ed8.herokuapp.com","/user/user-logout"),"",{withCredentials:!0});case 4:localStorage.removeItem("user"),e.logout(),window.location.href="/",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return(0,u.jsx)("div",{className:"profile__body",children:(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"profile__page",children:[(0,u.jsx)("div",{className:"menu__left",children:(0,u.jsxs)("div",{className:"menu__left__element",children:[(0,u.jsx)("div",{className:"hello__profile",children:(0,u.jsx)("h2",{children:"TH\xd4NG TIN"})}),(0,u.jsx)("div",{className:"profile",children:(0,u.jsx)("label",{className:0===c?"profile_active":"",onClick:function(e){e.preventDefault(),d(0)},children:"H\u1ed3 s\u01a1"})}),(0,u.jsx)("div",{className:"order",children:(0,u.jsx)("label",{className:1===c?"profile_active":"",onClick:function(e){e.preventDefault(),d(1)},children:"\u0110\u01a1n h\xe0ng"})}),(0,u.jsx)("div",{className:"logout",children:(0,u.jsx)("label",{onClick:o,children:"\u0110\u0103ng xu\u1ea5t"})})]})}),(0,u.jsx)("div",{className:"main",children:0===c?(0,u.jsx)(h,{}):(0,u.jsx)(f,{})})]})})})}}}]);
//# sourceMappingURL=612.95ab9a2a.chunk.js.map